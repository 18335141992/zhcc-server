webpackJsonp([3],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[t("transition",[t("keep-alive",[t("router-view")],1)],1)],1)},staticRenderFns:[]},s=r("VU/8")(null,a,!1,null,null,null).exports,u=r("NYxO"),i=r("bOdI"),c=r.n(i),l=(n={},c()(n,"SET_LOADING",function(e,t){e.showLoading=t}),c()(n,"SET_BREADCRUMB_ITEMS",function(e,t){e.breadcrumbItems=t}),n),d={setLoading:function(e,t){(0,e.commit)("SET_LOADING",t)},setBreadcurmbItems:function(e,t){(0,e.commit)("SET_BREADCRUMB_ITEMS",t)}},m={showLoading:function(e){return e.showLoading},breadcrumbItems:function(e){return e.breadcrumbItems}};o.default.use(u.a);var p=new u.a.Store({state:{showLoading:!1,breadcrumbItems:[]},mutations:l,actions:d,getters:m}),f=r("BO1k"),g=r.n(f),A=r("Gu7T"),h=r.n(A),v=r("/ocq"),b=r("T+/8");o.default.use(v.a);var w=new v.a({routes:[{path:"/login",name:"login",component:b.default,meta:{requiresAuth:!1}},{path:"/index",redirect:"/",meta:{requiresAuth:!0}}]});!function(){if(!sessionStorage.routers)return;var e={path:"/",name:"/",component:function(e){return r.e(1).then(function(){var t=[r("KR8f")];e.apply(null,t)}.bind(this)).catch(r.oe)},children:[].concat(h()(function(){var e=JSON.parse(sessionStorage.routers),t=[],n=function(e){if(null!=e.code){var n=JSON.parse(e.properties),o={path:e.url,name:e.code,component:function(t){return r.e(0).then(function(){var n=[r("eTVe")("./"+e.code+"/index")];t.apply(null,n)}.bind(this)).catch(r.oe)},meta:{routerId:e.id,requiresAuth:n.meta.requiresAuth,nameFullPath:n.nameFullPath}};t.push(o)}},o=!0,a=!1,s=void 0;try{for(var u,i=g()(e);!(o=(u=i.next()).done);o=!0){var c=u.value;n(c)}}catch(e){a=!0,s=e}finally{try{!o&&i.return&&i.return()}finally{if(a)throw s}}return t}()))};w.addRoutes([e])}(),w.beforeEach(function(e,t,r){var n=sessionStorage.getItem("token");"/"!==e.path||n?e.meta.requiresAuth?n?r():r({path:"/login",query:{redirect:e.fullPath}}):r():r({path:"/login",query:{redirect:e.fullPath}})}),w.afterEach(function(e,t){var r=[];if(r.push({title:"首页",to:"/"}),e.meta.nameFullPath){var n=e.meta.nameFullPath.split("/");n.forEach(function(t,o){var a={title:t,to:o==n.length-1?e.path:""};r.push(a)})}w.app.$store.dispatch("setBreadcurmbItems",r)});var I=w,C=r("zL8q"),E=r.n(C);r("tvR6");o.default.config.productionTip=!1,o.default.use(E.a),new o.default({el:"#app",store:p,router:I,template:"<App/>",components:{App:s}})},"Qe+c":function(e,t){},SVcA:function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return s}),r.d(t,"f",function(){return u}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return c}),r.d(t,"b",function(){return l});var n=r("vLgD"),o=function(e){return Object(n.a)({url:"/routers",method:"get",params:{offset:e.offset,limit:e.limit,name:e.name}})},a=function(e){return Object(n.a)({url:"/routers/"+e,method:"get"})},s=function(e){return Object(n.a)({url:"/routers/search",method:"get",params:{parentId:e}})},u=function(e){return Object(n.a)({url:"/routers",method:"post",data:e})},i=function(e,t){return Object(n.a)({url:"/routers/"+e,method:"put",data:t})},c=function(e){return Object(n.a)({url:"/routers/"+e,method:"delete"})},l=function(e){return Object(n.a)({url:"/routers/all?includeLocked="+e,method:"get"})}},"T+/8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("BO1k"),o=r.n(n),a=r("Gu7T"),s=r.n(a),u=r("mvHQ"),i=r.n(u),c=r("Dd8w"),l=r.n(c),d=r("vLgD"),m=r("mw3O"),p=r.n(m),f=(r("SVcA"),r("NYxO")),g={data:function(){return{displayLoading:!1,loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入口令",trigger:"blur"}]}}},computed:l()({},Object(f.b)(["showLoading"])),methods:{doLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){var r,n;t&&(e.$store.dispatch("setLoading",!0),(r=e.loginForm.username,n=e.loginForm.password,Object(d.a)({url:"/auth/token",method:"post",data:p.a.stringify({loginName:r,password:n})})).then(function(t){sessionStorage.setItem("currentUser",i()({id:t.data.userId,name:t.data.username})),sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("routers",i()(t.data.routers)),e.initIndexRouter();var r=decodeURIComponent(e.$route.query.redirect||"/");e.$router.push(r),e.$store.dispatch("setLoading",!1)}).catch(function(t){e.$store.dispatch("setLoading",!1),e.$message({showClose:!0,message:t,type:"error"})}))})},initIndexRouter:function(){var e={path:"/",name:"/",component:function(e){return r.e(1).then(function(){var t=[r("KR8f")];e.apply(null,t)}.bind(this)).catch(r.oe)},children:[].concat(s()(this.generateChildRouters()))};this.$router.addRoutes([e])},generateChildRouters:function(){if(!sessionStorage.routers)return[];var e=JSON.parse(sessionStorage.routers),t=[];console.log(e);var n=function(e){if(console.log(e),null!=e.code){var n=JSON.parse(e.properties),o={path:e.url,name:e.code,component:function(t){return r.e(0).then(function(){var n=[r("eTVe")("./"+e.code+"/index")];t.apply(null,n)}.bind(this)).catch(r.oe)},meta:{routerId:e.id,requiresAuth:n.meta.requiresAuth,nameFullPath:n.nameFullPath}};t.push(o)}},a=!0,s=!1,u=void 0;try{for(var i,c=o()(e);!(a=(i=c.next()).done);a=!0){n(i.value)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return t}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.rules,autoComplete:"on","label-position":"left"}},[n("div",{staticClass:"login-header"},[n("strong",{staticClass:"login-title"},[e._v("系统登录")])]),e._v(" "),n("div",{staticClass:"login-body"},[n("img",{staticClass:"profile-img",attrs:{src:r("ZyW+"),alt:""}}),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{name:"username",size:"medium",autoComplete:"on",autofocus:"autofocus",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[n("div",{staticClass:"login-username",attrs:{slot:"prepend"},slot:"prepend"})])],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{name:"password",type:"password",size:"medium",placeholder:"口令"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[n("template",{slot:"prepend"},[n("div",{staticClass:"login-password"})])],2)],1),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.showLoading},nativeOn:{click:function(t){return t.preventDefault(),e.doLogin(t)}}},[e._v("登录")])],1)])],1)},staticRenderFns:[]};var h=r("VU/8")(g,A,!1,function(e){r("Qe+c")},"data-v-6683870d",null);t.default=h.exports},"ZyW+":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAFKElEQVR4Xu2dj3EdNRDGVxUQOkgqwKkg7DVAUgGhAkIFJBWQVACpANPArVNBTAWECjAViPmCnufNww/f6fRpT7I047Fn3jvpbn/7R9Jp10FGc5VAcB19DC4DgLMSDAADgLMEnIcfFjAAOEvAefhhAQOAswSch2/CAuZ5fhZC+FpELkTkkYjg79N2LSI3InIlIp9E5IOq4veu2y4BmBmE/I2IPE8/uUIEgEsRebdXGLsCYGaPReRHEXmZK/H/uQ6W8UZV8Xs3bRcAksZD8K8qSAau6oe9gHAHYGZwMz8n315B/rdD/JJAIG64NTcASet/IrmbpQJFjHihqrAKl+YCIAnf0qzG5cFPBv1OVWER1Vt1AGaGqeSvIoKAu6fmAqEqgKT5fzj4+6Wgq0OoBmCHbucclKoQagKA28GMZ+8Ns6KntRZuVQCYGeb3mPG00q5V9WmNm6UDSKtb+P3WGlbNr9k3XQMAppt3bZ6xn21r/1VcERWAmUHwANBqe6+qjH2pW3mwAbSq/ccK84QZkGkA0oLrY6uqf3TfVCtgAngrIt93AOBGVb9kPQcTwF87XvGulSdtcUYB0EHwPQVEc0MsAJg/4wVLL+2Tqj5hPAwFwDzPVyGEZ4wbduyTMhuiADCznvz/gbkyXmOyAERHTWUNTdmaKA6gwwB8ADoAsFR7Yb+UmdCwgIXSjzF+mKap+KbiADAALJSA/9eaiQE49dDDJtwp8jYA4K7NbExDF1ps8RiAced5vgkhfLHwHlr5WjsLsR63IlSVoqyUTs2sq824GOPv0zQhthVvLACtvws+FTQSPChH5ykAOowDOKhFOUFNA2BmXbySjDH+OU0T7SAxE0Av6wFk00CZKI0GILmhpl/MxBj/DiE8VlVaFg0VQAdb05TV77EpUQG0bAU1tB/yoQPA4dwY43WDK2PkjiHHmNroANLeUGvH02nz/lOaVQAkCNAmZL/vumHVi7IIzMBbNQYcBkOKUowRs6Kv9kog+f0L5mFcNwtIVrBbCEn40HzKivec0lVzQXu2BC/hV5kF3UU+ZUwiMdo9JiSf/7K25h/kUt0CjoF4b1vjpEMI4XmtgHuXMroCSHHhIsb4tuZZ0uRyoPX0ef59Ew53AAkCdhuRzkTbdTwRxCtVfXefcGp87gog7RV961QxBZVSXqvq+xqC3s0s6EjjUSOo+EmzDGG6gqhuAWaGxA16AnQGCJQyw95/n+uA5G6g9bX8fAaDz5fALb3JvXjtdVUswMyQLUl7q7T2oRd8H1aAc0C0FzHV1gFmBq2nZpsvEGjOVyB8QKC6JJoFNFQf6D44tBRV2lZER8I/wKFBKG4BHQqfCqEogI6FT4NQGkCrAfe+OHD4vHhgLgbAzDDTAYDeG1bOOKpYZIpaBEAqS4asGFQ9fwjtUlVflHjQUgAgfMrx7RIPSeqjyJHFzQAekOs55QgXhPoRm1zRJgANVMIlKf9tt5vPD20F0FUmTCatTVVUsgE8wMB7js8VNowy4eWfDfV+oZ77wKTrsq1giwWgGu7e9/ZJ8v5Pt9mxIAtA+rcjKMY92r8SyK6smAugiYO2lbUja8c0F0CPpQi28vpNVVeX518NoIO0o62CPnd9lhvKATDm/ucRrs4nXg2gxzoQBU1i9f7QagCdlqIpxWB1HBgASoleRHLqyuUA6KIEQUG5H3e1OrMyBwDSjC5rHicnCatYt6gnEULAibrV/41vNYBidz06+iyBAcBZEQaAAcBZAs7DDwsYAJwl4Dz8Pyy/8XDnwdOrAAAAAElFTkSuQmCC"},tvR6:function(e,t){},vLgD:function(e,t,r){"use strict";var n=r("//Fk"),o=r.n(n),a=r("mtWM"),s=r.n(a).a.create({baseURL:"http://localhost:8080",timeout:5e3});s.interceptors.request.use(function(e){return sessionStorage.getItem("token")&&(e.headers["X-Token"]=sessionStorage.getItem("token")),e},function(e){o.a.reject(e)}),s.interceptors.response.use(function(e){return 2==e.data.errCode&&router.push({path:"/login",querry:{redirect:router.currentRoute.fullPath}}),e},function(e){return o.a.reject(e)}),t.a=s}},["NHnr"]);
//# sourceMappingURL=app.4982fedf4ce25e23e1e8.js.map